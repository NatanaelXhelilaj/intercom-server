<html>

<head>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .switch {
            position: relative;
            display: inline-block;
            width: 60px;
            height: 34px;
        }

        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            -webkit-transition: .4s;
            transition: .4s;
        }

        .slider:before {
            position: absolute;
            content: "";
            height: 26px;
            width: 26px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            -webkit-transition: .4s;
            transition: .4s;
        }

        input:checked+.slider {
            background-color: #2196F3;
        }

        input:focus+.slider {
            box-shadow: 0 0 1px #2196F3;
        }

        input:checked+.slider:before {
            -webkit-transform: translateX(26px);
            -ms-transform: translateX(26px);
            transform: translateX(26px);
        }

        /* Rounded sliders */
        .slider.round {
            border-radius: 34px;
        }

        .slider.round:before {
            border-radius: 50%;
        }
    </style>
</head>

<body>

    <body class="bg-slate-900">
        <div id="sidenav"
            class="sidenav fixed top-0 left-0 h-[100vh] w-[100vw] bg-indigo-800 duration-500 p-8 flex flex-col justify-center items-center">
            <div class="flex items-center gap-2">
                <h3 class="text-xl text-white font-bold">Mic Switch</h3>
                <label class="switch">
                    <input type="checkbox" onchange="micToggle(this)" checked>
                    <span class="slider round"></span>
                </label>
            </div>

            <ul class="w-full h-min">
                <li class="w-[100%] mt-6"><a
                        class="bg-slate-900 text-white font-bold py-8 px-8 rounded w-[100%] block text-5xl"
                        href="/sfu/video_prod">Video Prod</a></li>
                <li class="w-[100%] mt-6"><a
                        class="bg-slate-900 text-white font-bold py-8 px-8 rounded w-[100%] block text-5xl"
                        href="/sfu/tech_team">Tech Team</a></li>
                <li class="w-[100%] mt-6"><a
                        class="bg-slate-900 text-white font-bold py-8 px-8 rounded w-[100%] block text-5xl"
                        href="/sfu/lights">Lights</a></li>
                <li class="w-[100%] mt-6"><a
                        class="bg-slate-900 text-white font-bold py-8 px-8 rounded w-[100%] block text-5xl"
                        href="/sfu/all">All</a></li>
            </ul>
        </div>

        <div id="video" class="w-0 h-0">
            <table class="mainTable">
                <tbody>
                    <tr>
                        <td class="localColumn">
                            <video id="localVideo" autoplay class="video" muted></video>
                        </td>
                        <td class="remoteColumn">
                            <div id="videoContainer"></div>
                        </td>
                    </tr>
                </tbody>
            </table>
            <table>
                <tbody>
                    <tr>
                        <td>

                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </body>
    <script>
        console.log(document.URL.split('/'))
        switch (document.URL.split('/')[4]) {
            case 'video_prod':
                document.getElementsByTagName('a')[0].classList.remove('bg-slate-900');
                document.getElementsByTagName('a')[0].classList.add('bg-blue-700');
                break;
            case 'tech_team':
                document.getElementsByTagName('a')[1].classList.remove('bg-slate-900');
                document.getElementsByTagName('a')[1].classList.add('bg-blue-700');
                break;
            case 'lights':
                document.getElementsByTagName('a')[2].classList.remove('bg-slate-900');
                document.getElementsByTagName('a')[2].classList.add('bg-blue-700');
                break;
            case 'all':
                document.getElementsByTagName('a')[3].classList.remove('bg-slate-900');
                document.getElementsByTagName('a')[3].classList.add('bg-blue-700');
                break;

            default:
                break;
        }

        function micToggle(checkbox) {
            if (checkbox.checked) {
                localVideo.srcObject.getAudioTracks()[0].enabled = true;
                console.log("mic on");
            } else {
                localVideo.srcObject.getAudioTracks()[0].enabled = false;
                console.log("mic off");
            }
        }
    </script>
    <script src="bundle.js"></script>
</body>

</html>